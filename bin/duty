#!/usr/bin/env ruby

module Duty
  class CLI
    def initialize(args)
      @args = args
    end

    def exec
      if @args.any?
        if @args[0] == 'new-feature'
          if name = @args[1]
            bullet = "\u2022".encode('utf-8')
            write "What just happend:\n\n#{bullet} Checked out `master` branch\n#{bullet} Created new feature branch `feature\/#{name}`\n#{bullet} Checked out new feature branch `feature\/#{name}`\n#{bullet} Pushed new feature branch `feature\/#{name}` to `origin`"
          else
            write "Creates a new feature branch\n\nusage: duty new-feature <name>"
          end
        else
          write "duty: `#{@args.join(' ')}` is not a duty command"
        end
      else
        write "usage: duty <command> [<args>]\n\nCommands:\n\nnew-feature\tCreates a new feature branch"
      end
    end

    private

    def write(msg)
      $stdout.puts msg
    end
  end
end

Duty::CLI.new(ARGV).exec
